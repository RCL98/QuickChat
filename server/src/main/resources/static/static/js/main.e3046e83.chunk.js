(this["webpackJsonpquick-chat"]=this["webpackJsonpquick-chat"]||[]).push([[0],{112:function(e,s,t){},113:function(e,s,t){},146:function(e,s,t){},149:function(e,s,t){"use strict";t.r(s);var a=t(0),i=t.n(a),n=t(28),c=t.n(n),r=(t(112),t(68)),o=t(14),u=(t(113),t(6)),d=t(7),m=Object(d.d)({name:"users",initialState:[{id:"1",username:"USER1"},{id:"2",username:"USER2"},{id:"3",username:"USER3"}],reducers:{}}).reducer,l=[{id:1,author:"User",content:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quos blanditiisNaNcupiditate numquam dignissimos laborum fugiat deleniti? Eum quasi quidem quibusdam",timestamp:Date.now()-355},{id:2,author:"Me",content:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quos blanditiis ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssNaNcupiditate numquam dignissimos laborum fugiat deleniti? Eum quasi quidem quibusdam",timestamp:Date.now()-255},{id:3,author:"User",content:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quos blanditiisNaNcupiditate numquam dignissimos laborum fugiat deleniti? Eum quasi quidem quibusdam",timestamp:Date.now()-155},{id:4,author:"User",content:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quos blanditiisNaNcupiditate numquam dignissimos laborum fugiat deleniti? Eum quasi quidem quibusdam",timestamp:Date.now()-55},{id:5,author:"Me",content:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quos blanditiisNaNcupiditate numquam dignissimos laborum fugiat deleniti? Eum quasi quidem quibusdam",timestamp:Date.now()}],j=Object(d.d)({name:"messages",initialState:l,reducers:{messageAdded:function(e,s){e.push(s.payload)}}}),b=j.actions.messageAdded,h=j.reducer,p=t(69),O=t.n(p),g=t(91),f=t(92),x=t(22),v=Object(f.a)({reducerPath:"wsApi",baseQuery:Object(x.d)({baseUrl:"http://localhost:8080"}),endpoints:function(e){return{getMessages:e.query({query:function(){return"/messages"},onCacheEntryAdded:function(e,s){return Object(g.a)(O.a.mark((function e(){var t,a,i,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.updateCachedData,s.cacheDataLoaded,a=s.cacheEntryRemoved,i=new WebSocket("ws://localhost:8080/ws-quick");try{n=function(e){var s=JSON.parse(e.data);console.log(s),t((function(e){e.push(s)}))},i.addEventListener("message",n)}catch(c){}return e.next=5,a;case 5:i.close();case 6:case"end":return e.stop()}}),e)})))()}})}}}),N=(v.useGetMessagesQuery,Object(d.a)({reducer:Object(u.a)({users:m,messages:h},v.reducerPath,v.reducer),middleware:function(e){return e().concat(v.middleware)}})),w=t(18),q=t(97),y=t(213),S=t(205),k=t(209),E=t(210),L=t(2),D=Object(S.a)((function(e){return{paper:{width:"50%",margin:"2%",wordWrap:"break-word",float:function(e){return"Me"===e.author?"left":"right"}},author:{textAlign:"left",paddingLeft:"2%",margin:"3%"},timestamp:{textAlign:"right",paddingRight:"2%",margin:"3%"},messageBody:{textAlign:"left",paddingLeft:"2%",margin:"5%"}}}));function A(e){var s=D(e);return Object(L.jsxs)(k.a,{className:s.paper,color:"primary",children:[Object(L.jsx)(E.a,{variant:"h6",className:s.author,children:e.author}),Object(L.jsx)(E.a,{variant:"body2",className:s.messageBody,children:e.content}),Object(L.jsx)(E.a,{variant:"subtitle2",className:s.timestamp,children:new Date(e.timestamp).toTimeString().substr(0,5)})]})}var C=Object(S.a)((function(e){return{messagesList:{maxHeight:"100%",backgroundColor:"#66ff66",overflowY:"scroll"}}}));function M(){var e=Object(w.e)((function(e){return e.messages})),s=C();return Object(L.jsx)("div",{className:s.messagesList,children:Object(L.jsx)("ul",{children:e.map((function(e){return Object(L.jsx)(A,{author:e.author,content:e.content,timestamp:e.timestamp},e.id)}))})})}var U,R=t(204),Q=t(208),B=t(206),J=t(203),P=t(95),W=t.n(P),z=t(120),G=t(138),I="TestUser";z.post("http://localhost:8080/user/create",{name:I,timestamp:Date.now()}).then((function(e){U=e.data.id,console.log(U);var s=new W.a("http://localhost:8080/ws-quick?sessionId=".concat(U));G.over(s).connect({},(function(){console.log("Connected")}),(function(e){console.log(e)}))})).catch((function(e){console.log(e)}));var T=Object(S.a)((function(e){return{inputArea:{width:"100%",padding:"20px",position:"relative",top:"15%"},sendButton:{position:"relative",left:"20%",top:"5%"}}}));function Y(e){var s=T(),t=Object(a.useState)(""),i=Object(o.a)(t,2),n=i[0],c=i[1],r=Object(w.d)();return Object(L.jsxs)(Q.a,{container:!0,className:s.inputArea,children:[Object(L.jsx)(Q.a,{item:!0,xs:11,sm:11,md:11,lg:11,xl:11,children:Object(L.jsx)(R.a,{id:"outlined-multiline-flexible",label:"Your message",fullWidth:!0,maxRows:2,multiline:!0,value:n,onChange:function(e){return c(e.target.value)}})}),Object(L.jsx)(Q.a,{item:!0,xs:1,sm:1,md:1,lg:1,xl:1,children:Object(L.jsx)(B.a,{"aria-label":"send",color:"primary",size:"small",className:s.sendButton,onClick:function(){if(n){var s={id:Object(d.m)(),author:"Me",content:n,timestamp:Date.now()};r(b(s));var t={id:Object(d.m)(),author:I,content:n,timestamp:Date.now()};e.client.publish({destination:"/chat",body:JSON.stringify(t)})}c("")},children:Object(L.jsx)(J.a,{fontSize:"large"})})})]})}t(146);function H(e){return Object(L.jsxs)("div",{className:"ChatRoomContainer",children:[Object(L.jsx)("div",{className:"MessagesList",children:Object(L.jsx)(M,{})}),Object(L.jsx)("div",{className:"NewMessageBox",children:Object(L.jsx)(Y,{client:e.client,userName:e.userName})})]})}var F=t(211),K=t(212),V=t(96),X=t.n(V);function Z(e){return Object(L.jsx)(F.a,{position:"fixed",className:e.className,children:Object(L.jsxs)(K.a,{variant:"dense",children:[Object(L.jsx)(B.a,{edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(L.jsx)(X.a,{})}),Object(L.jsx)(E.a,{variant:"h6",color:"inherit",component:"div",children:"Photos"})]})})}function $(){var e=Object(w.e)((function(e){return e.users})).map((function(e){return Object(L.jsx)(k.a,{children:Object(L.jsxs)(E.a,{variant:"h5",children:[" ",e.username," "]})},e.id)}));return Object(L.jsxs)("section",{children:[Object(L.jsx)(E.a,{variant:"h2",children:" Online Users "}),e]})}var _=Object(q.a)({palette:{type:"dark"}}),ee=Object(q.a)({});function se(){var e=Object(a.useState)(!1),s=Object(o.a)(e,1)[0];return Object(L.jsx)(y.a,{theme:s?Object(r.a)({},_):Object(r.a)({},ee),children:Object(L.jsxs)(w.a,{store:N,children:[Object(L.jsx)(Z,{}),Object(L.jsxs)("div",{className:"AppContainer",children:[Object(L.jsx)("div",{className:"Groups",children:Object(L.jsx)($,{})}),Object(L.jsx)("div",{className:"ChatRoom",children:Object(L.jsx)(H,{client:undefined,userName:I})})]})]})})}c.a.render(Object(L.jsx)(i.a.StrictMode,{children:Object(L.jsx)(se,{})}),document.getElementById("root"))}},[[149,1,2]]]);
//# sourceMappingURL=main.e3046e83.chunk.js.map